<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-terminal-4.7.4">
     
     
    <link rel="icon" type="image/png" sizes="192x192" href="../../../img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="../../../img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="../../../img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="../../../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../../../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../../../img/favicon-32x32.png" />


    
 
<title>My org - emacs.d</title>


<link href="../../../css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="../../../css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="../../../css/normalize.css" rel="stylesheet">
<link href="../../../css/terminal.css" rel="stylesheet">
<link href="../../../css/theme.css" rel="stylesheet">
<link href="../../../css/theme.tile_grid.css" rel="stylesheet">
<link href="../../../css/theme.footer.css" rel="stylesheet">
<!-- gruvbox_dark color palette -->
<link href="../../../css/palettes/gruvbox_dark.css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>



     
    
    

    
    <!-- search css support -->
<link href="../../../css/search/bootstrap-modal.css" rel="stylesheet">
<!-- search scripts -->
<script>
    var base_url = "../../..",
    shortcuts = "{}";
</script>
<script src="../../../js/jquery/jquery-1.10.1.min.js" defer></script>
<script src="../../../js/bootstrap/bootstrap.min.js" defer></script>
<script src="../../../js/mkdocs/base.js" defer></script>
    
    
    
    
    <script src="../../../search/main.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="/" class="no-style">emacs.d</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../.." class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Home</span>
                    </a>
                    <meta property="position" content="0">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../about/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">About</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                
                
                
                
                
                    
                    


<li property="itemListElement" typeof="ListItem">
    <a href="#" class="menu-item" data-toggle="modal" data-target="#mkdocs_search_modal" property="item" typeof="SearchAction">
        <i aria-hidden="true" class="fa fa-search"></i> <span property="name">Search</span>
    </a>
    <meta property="position" content="2">
</li>
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../..">Home</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../about/">About</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        <span class="
        
    

    terminal-mkdocs-side-nav-item--active terminal-mkdocs-side-nav-section-no-index">Src</span>
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../early-init/">early-init</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../init/">init</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-base/">My base</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-completion/">My completion</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-documentation/">My documentation</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-ide/">My ide</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-kbd/">My kbd</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-latex/">My latex</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-misc/">My misc</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        <span class="

    terminal-mkdocs-side-nav-item--active">My org</span>
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-programs/">My programs</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-to-sort/">My to sort</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-ui/">My ui</a>
        
    
    
                

                
                
            </li>
        
            
            

            <li class="terminal-mkdocs-side-nav-li-ul-li">
                
                    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../my-workspaces/">My workspaces</a>
        
    
    
                

                
                
            </li>
        
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            
            
            <span class="

    terminal-mkdocs-side-nav-item">Misc</span>
        
    
    
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#code">Code</a></li>
        
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
    
    
    
    
    

<section id="mkdocs-terminal-content">
    <h3 id="code">Code</h3>
<div class="codehilite"><pre><span></span><code><span class="w">  </span><span class="nb">:setq</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-directory</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;~/Notes/org&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-tags-column</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="mi">-55</span><span class="p">)</span><span class="w">          </span><span class="c1">; column where tags are indented to</span>
<span class="w">  </span><span class="c1">;; (org-startup-folded . &#39;showall)  ; default folding mode</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-startup-folded</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="ss">&#39;nofold</span><span class="p">)</span><span class="w">  </span><span class="c1">; default folding mode</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-startup-indented</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">t</span><span class="p">)</span><span class="w">       </span><span class="c1">; indent headings and its body</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-special-ctrl-a/e</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-src-window-setup</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="ss">&#39;current-window</span><span class="p">)</span><span class="w"> </span><span class="c1">; edit code blocks in the same window</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-return-follows-link</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">t</span><span class="p">)</span><span class="w">            </span><span class="c1">; RET can open links</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-hide-emphasis-markers</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">t</span><span class="p">)</span><span class="w"> </span><span class="c1">; hide formatting chars (* / ~ = etc)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-src-preserve-indentation</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">t</span><span class="p">)</span><span class="w"> </span><span class="c1">; remove annoying leading whitespace in code blocks</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-fontify-whole-heading-line</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; (org-ellipsis . &quot; ›&quot;)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-ellipsis</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot; ‣&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; (org-ellipsis . &quot; …&quot;)</span>
<span class="w">  </span><span class="c1">;; (org-ellipsis . &quot; ⤵&quot;)</span>
<span class="w">  </span><span class="c1">;; (org-ellipsis . &quot; ▾&quot;)</span>

<span class="w">  </span><span class="nb">:init</span>
<span class="w">  </span><span class="p">(</span><span class="nv">general-my-map</span>
<span class="w">    </span><span class="s">&quot;o&quot;</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="nb">:ignore</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="nb">:which-key</span><span class="w"> </span><span class="s">&quot;org&quot;</span><span class="p">))</span>

<span class="w">  </span><span class="c1">;; :hook (org-mode-hook . indent-tabs-mode)</span>

<span class="w">  </span><span class="nb">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-insert-subheading-respect-content</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="s">&quot;Insert new subheading after the current heading&#39;s body.</span>
<span class="s">If in a list, inserts a new sublist after the current list.&quot;</span>
<span class="w">    </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">org-meta-return</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">org-metaright</span><span class="p">))</span>

<span class="w">  </span><span class="nb">:bind</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-mode-map</span>
<span class="w">   </span><span class="p">(</span><span class="s">&quot;C-M-&lt;return&gt;&quot;</span>
<span class="w">    </span><span class="o">.</span><span class="w"> </span><span class="nv">my/org-insert-subheading-respect-content</span><span class="p">))</span>

<span class="w">  </span><span class="nb">:defer-config</span>

<span class="w">  </span><span class="c1">;; set org font sizes</span>
<span class="w">  </span><span class="p">(</span><span class="nb">dolist</span>
<span class="w">      </span><span class="c1">;; (pair &#39;((org-document-title :height 1.9 :weight bold)</span>
<span class="w">      </span><span class="c1">;;         (org-level-1 :height 1.7 :weight bold)</span>
<span class="w">      </span><span class="c1">;;         (org-level-2 :height 1.4 :weight bold)</span>
<span class="w">      </span><span class="c1">;;         (org-level-2 :height 1.1)</span>
<span class="w">      </span><span class="c1">;;         (org-level-3 :height 1.1)))</span>
<span class="w">      </span><span class="p">(</span><span class="nv">pair</span><span class="w"> </span><span class="o">&#39;</span><span class="p">((</span><span class="nv">org-document-title</span><span class="w"> </span><span class="nb">:height</span><span class="w"> </span><span class="mf">1.9</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="nf">apply</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nv">set-face-attribute</span><span class="w"> </span><span class="p">(</span><span class="nf">car</span><span class="w"> </span><span class="nv">pair</span><span class="p">)</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="p">(</span><span class="nf">cdr</span><span class="w"> </span><span class="nv">pair</span><span class="p">)))</span>

<span class="w">  </span><span class="p">(</span><span class="nb">require</span><span class="w"> </span><span class="ss">&#39;org-tempo</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;sh&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src shell&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;el&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src emacs-lisp&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;py&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src python&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;gcc&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src c&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;scm&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src scheme&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;conf&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src conf&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;java&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src java&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;unix&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src conf-unix&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-structure-template-alist</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;clang&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;src c&quot;</span><span class="p">))</span>

<span class="w">  </span><span class="c1">;; fix syntax &lt;&gt; matching with paren</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-hook</span><span class="w"> </span><span class="ss">&#39;org-mode-hook</span><span class="w"> </span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">()</span>
<span class="w">                             </span><span class="p">(</span><span class="nf">modify-syntax-entry</span><span class="w"> </span><span class="sc">?&lt;</span><span class="w"> </span><span class="s">&quot;.&quot;</span><span class="p">)</span>
<span class="w">                             </span><span class="p">(</span><span class="nf">modify-syntax-entry</span><span class="w"> </span><span class="sc">?&gt;</span><span class="w"> </span><span class="s">&quot;.&quot;</span><span class="p">)))</span>


<span class="w">  </span><span class="c1">;; keywords override</span>

<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-todo-color-override</span><span class="w"> </span><span class="p">(</span><span class="kp">&amp;rest</span><span class="w"> </span><span class="nv">_</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;Set org-todo-keyword-faces only if not already set by the theme.&quot;</span>
<span class="w">    </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-todo-keyword-faces</span>
<span class="w">          </span><span class="o">`</span><span class="p">((</span><span class="s">&quot;NEXT&quot;</span><span class="w"> </span><span class="nb">:foreground</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="p">(</span><span class="nv">ignore-error</span>
<span class="w">                                         </span><span class="p">(</span><span class="nv">face-attribute</span><span class="w"> </span><span class="ss">&#39;highlight</span><span class="w"> </span><span class="nb">:foreground</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="ss">&#39;default</span><span class="p">))</span>
<span class="w">                                     </span><span class="s">&quot;yellow&quot;</span><span class="p">)))))</span>

<span class="w">  </span><span class="c1">;; Advise the load-theme function to run our color override</span>
<span class="w">  </span><span class="p">(</span><span class="nv">advice-add</span><span class="w"> </span><span class="ss">&#39;load-theme</span><span class="w"> </span><span class="nb">:after</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nv">my/org-todo-color-override</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; Run once immediately to set colors if no theme is loaded</span>
<span class="w">  </span><span class="p">(</span><span class="nv">my/org-todo-color-override</span><span class="p">)</span>

<span class="w">  </span><span class="p">)</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-download</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span>
<span class="w">  </span><span class="nb">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-download-enable</span><span class="p">)</span>
<span class="w">  </span><span class="nb">:setq-default</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-download-image-dir</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;_images&quot;</span><span class="p">))</span>

<span class="c1">;; TODO: replace with org-superstar</span>
<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-bullets</span>
<span class="w">  </span><span class="nb">:hook</span><span class="w"> </span><span class="nv">org-mode-hook</span>
<span class="w">  </span><span class="nb">:setq</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-bullets-bullet-list</span>
<span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;◉&quot;</span>
<span class="w">       </span><span class="s">&quot;●&quot;</span>
<span class="w">       </span><span class="s">&quot;○&quot;</span>
<span class="w">       </span><span class="s">&quot;■&quot;</span>
<span class="w">       </span><span class="s">&quot;□&quot;</span>
<span class="w">       </span><span class="s">&quot;✦&quot;</span>
<span class="w">       </span><span class="s">&quot;✧&quot;</span>
<span class="w">       </span><span class="s">&quot;✿&quot;</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">toc-org</span>
<span class="w">  </span><span class="nb">:hook</span><span class="w"> </span><span class="nv">org-mode-hook</span><span class="p">)</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">anki-editor</span>
<span class="w">  </span><span class="nb">:commands</span><span class="w"> </span><span class="p">(</span><span class="nv">anki-editor-push-note-at-point</span>
<span class="w">             </span><span class="nv">anki-editor-push-notes</span>
<span class="w">             </span><span class="nv">anki-editor-push-new-notes</span><span class="p">)</span>
<span class="w">  </span><span class="nb">:setq</span>
<span class="w">  </span><span class="p">(</span><span class="nv">anki-editor-latex-style</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="ss">&#39;mathjax</span><span class="p">)</span>
<span class="w">  </span><span class="nb">:defer-config</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/ensure-anki-editor-mode</span><span class="w"> </span><span class="p">(</span><span class="nv">note</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;Ensure </span><span class="ss">`anki-editor-mode&#39;</span><span class="s"> is enabled before pushing notes.&quot;</span>
<span class="w">    </span><span class="p">(</span><span class="nb">unless</span><span class="w"> </span><span class="nv">anki-editor-mode</span>
<span class="w">      </span><span class="p">(</span><span class="nv">anki-editor-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">advice-add</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nv">anki-editor--push-note</span><span class="w"> </span><span class="nb">:before</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nv">my/ensure-anki-editor-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nb">use-package</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nb">:ensure</span><span class="w"> </span><span class="p">(</span><span class="nb">:wait</span><span class="w"> </span><span class="nv">f</span><span class="p">))</span>
<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">image-slicing</span><span class="w"> </span><span class="nb">:ensure</span><span class="w"> </span><span class="no">nil</span>
<span class="w">  </span><span class="nb">:hook</span><span class="w"> </span><span class="nv">org-mode-hook</span>
<span class="w">  </span><span class="nb">:setq</span>
<span class="w">  </span><span class="p">(</span><span class="nv">image-slicing-newline-trailing-text</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">nil</span><span class="p">))</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-auto-tangle</span>
<span class="w">  </span><span class="nb">:hook</span><span class="w"> </span><span class="nv">org-mode-hook</span><span class="p">)</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-agenda</span><span class="w"> </span><span class="nb">:ensure</span><span class="w"> </span><span class="no">nil</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span>
<span class="w">  </span><span class="nb">:init</span>
<span class="w">  </span><span class="p">(</span><span class="nv">general-my-map</span>
<span class="w">    </span><span class="s">&quot;oa&quot;</span><span class="w"> </span><span class="ss">&#39;org-agenda</span><span class="p">)</span>

<span class="w">  </span><span class="nb">:bind</span><span class="w"> </span><span class="p">(</span><span class="nv">org-agenda-mode-map</span>
<span class="w">         </span><span class="p">(</span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="ss">&#39;org-agenda-todo</span><span class="p">))</span>

<span class="w">  </span><span class="nb">:config</span>
<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-todo-keywords</span>
<span class="w">        </span><span class="o">&#39;</span><span class="p">((</span><span class="nv">sequence</span><span class="w"> </span><span class="s">&quot;TODO(t)&quot;</span><span class="w"> </span><span class="s">&quot;NEXT(n)&quot;</span>
<span class="w">                    </span><span class="s">&quot;|&quot;</span>
<span class="w">                    </span><span class="s">&quot;DONE(d/!)&quot;</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-agenda-files</span>
<span class="w">        </span><span class="p">(</span><span class="nf">list</span><span class="w"> </span><span class="s">&quot;~/Notes/org/Inbox.org&quot;</span>
<span class="w">              </span><span class="s">&quot;~/Notes/org/agenda.org&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-tag-alist</span>
<span class="w">        </span><span class="o">&#39;</span><span class="p">(</span><span class="c1">;; Places</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@home&quot;</span><span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="sc">?H</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@school&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?S</span><span class="p">)</span>
<span class="w">          </span><span class="c1">;; (&quot;@work&quot; . ?W)</span>
<span class="w">          </span><span class="c1">;; Activities</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@task&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?t</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@studying&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?s</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@errands&quot;</span><span class="w">  </span><span class="o">.</span><span class="w"> </span><span class="sc">?e</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@tidy&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?y</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@creative&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?c</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@art&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?a</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@programming&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?p</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@today&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?T</span><span class="p">)</span>
<span class="w">          </span><span class="c1">;; (&quot;@calls&quot; . ?l)</span>
<span class="w">          </span><span class="c1">;; Devices</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@phone&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?P</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="s">&quot;@computer&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="sc">?C</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-agenda-prefix-format</span>
<span class="w">        </span><span class="o">`</span><span class="p">((</span><span class="nv">agenda</span>
<span class="w">           </span><span class="o">.</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">&quot; %i &quot;</span>
<span class="w">                      </span><span class="s">&quot;%?-12t&quot;</span>
<span class="w">                      </span><span class="s">&quot;[%3(my/org-get-prop-effort)]    &quot;</span>
<span class="w">                      </span><span class="c1">;; &quot;%3(my/org-get-prop-effort)  &quot;</span>
<span class="w">                      </span><span class="s">&quot;% s&quot;</span><span class="p">))</span>
<span class="w">          </span><span class="p">(</span><span class="nv">todo</span><span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="s">&quot; %i &quot;</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="nv">tags</span><span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="s">&quot; %i %-12:c&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="c1">;; (search . &quot; %i %-12:c&quot;)</span>
<span class="w">          </span><span class="p">(</span><span class="nv">search</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot; %c&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-get-prop-effort</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">not</span><span class="w"> </span><span class="p">(</span><span class="nf">eq</span><span class="w"> </span><span class="nv">major-mode</span><span class="w"> </span><span class="ss">&#39;org-mode</span><span class="p">))</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">val</span><span class="w"> </span><span class="p">(</span><span class="nv">org-entry-get</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="s">&quot;EFFORT&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">not</span><span class="w"> </span><span class="nv">val</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">          </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="p">(</span><span class="nv">string-trim</span><span class="w"> </span><span class="nv">val</span><span class="p">))))))</span>

<span class="w">  </span><span class="p">(</span><span class="nb">require</span><span class="w"> </span><span class="ss">&#39;org-habit</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;org-modules</span><span class="w"> </span><span class="ss">&#39;org-habit</span><span class="w"> </span><span class="no">t</span><span class="p">))</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-super-agenda</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org-agenda</span>
<span class="w">  </span><span class="nb">:require</span><span class="w"> </span><span class="no">t</span>
<span class="w">  </span><span class="nb">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-super-agenda-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">:setq</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-agenda-custom-commands</span>
<span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="o">`</span><span class="p">(</span>
<span class="w">       </span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="s">&quot;main agenda&quot;</span>
<span class="w">        </span><span class="p">((</span><span class="nv">agenda</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                 </span><span class="p">((</span><span class="nv">org-agenda-show-future-repeats</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-agenda-start-on-weekday</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-agenda-span</span><span class="w"> </span><span class="ss">&#39;week</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-habit-show-habits</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-agenda-skip-deadline-if-done</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-agenda-skip-scheduled-if-done</span><span class="w"> </span><span class="no">t</span><span class="p">)))</span>
<span class="w">         </span><span class="p">(</span><span class="nv">todo</span><span class="w"> </span><span class="s">&quot;NEXT&quot;</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="nv">agenda</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                 </span><span class="p">((</span><span class="nv">org-agenda-span</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-agenda-use-time-grid</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">org-super-agenda-groups</span>
<span class="w">                   </span><span class="o">&#39;</span><span class="p">((</span><span class="nb">:name</span><span class="w"> </span><span class="nv">none</span>
<span class="w">                            </span><span class="nb">:habit</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
<span class="w">                     </span><span class="p">(</span><span class="nb">:discard</span><span class="w"> </span><span class="p">(</span><span class="nb">:anything</span><span class="w"> </span><span class="no">t</span><span class="p">)))))))))))</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-ql</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span><span class="p">)</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-pomodoro</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span><span class="p">)</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-noter</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span>
<span class="w">  </span><span class="nb">:bind</span><span class="w"> </span><span class="p">((</span><span class="s">&quot;C-c o n&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">org-noter</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="s">&quot;C-c d n&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">org-noter-start-from-dired</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="s">&quot;C-c o p&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">my/org-noter-set-prop-current-page</span><span class="p">))</span>
<span class="w">  </span><span class="nb">:setq</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-noter-doc-split-fraction</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mf">0.7</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="mf">0.6</span><span class="p">))</span>
<span class="w">  </span><span class="nb">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-noter-set-prop-current-page</span><span class="w"> </span><span class="p">(</span><span class="nv">arg</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;Set the property </span><span class="ss">`NOTER_PAGE&#39;</span><span class="s"> of the current org heading to the current noter page.</span>
<span class="s">The property will be removed if ran with a \\[universal-argument].&quot;</span>
<span class="w">    </span><span class="p">(</span><span class="k">interactive</span><span class="w"> </span><span class="s">&quot;P&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">org-noter--with-selected-notes-window</span>
<span class="w">     </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">equal</span><span class="w"> </span><span class="nv">arg</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="w">         </span><span class="p">(</span><span class="nv">org-delete-property</span><span class="w"> </span><span class="s">&quot;NOTER_PAGE&quot;</span><span class="p">)</span>
<span class="w">       </span><span class="p">(</span><span class="nv">when-let</span><span class="w"> </span><span class="p">((</span><span class="nv">vec</span><span class="w"> </span><span class="p">(</span><span class="nv">org-noter--get-current-view</span><span class="p">))</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">num</span><span class="w"> </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="nf">vectorp</span><span class="w"> </span><span class="nv">vec</span><span class="p">)</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">&gt;</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="w"> </span><span class="nv">vec</span><span class="p">)</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">aref</span><span class="w"> </span><span class="nv">vec</span><span class="w"> </span><span class="mi">1</span><span class="p">)))))</span>
<span class="w">         </span><span class="p">(</span><span class="nf">message</span><span class="w"> </span><span class="s">&quot;meow: %s&quot;</span><span class="w"> </span><span class="nv">num</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="nv">org-entry-put</span><span class="w"> </span><span class="p">(</span><span class="nf">point</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;NOTER_PAGE&quot;</span><span class="w"> </span><span class="nv">num</span><span class="p">))))))</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">org-capture</span><span class="w"> </span><span class="nb">:ensure</span><span class="w"> </span><span class="no">nil</span>
<span class="w">  </span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span>
<span class="w">  </span><span class="nb">:init</span>
<span class="w">  </span><span class="p">(</span><span class="nv">general-my-map</span>
<span class="w">    </span><span class="s">&quot;oc&quot;</span><span class="w"> </span><span class="ss">&#39;org-capture</span><span class="p">)</span>

<span class="w">  </span><span class="nb">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/get-org-agenda-denote-file</span><span class="w"> </span><span class="p">(</span><span class="nv">name</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">regex</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;^.*--%s__.*\\.org$&quot;</span><span class="w"> </span><span class="nv">name</span><span class="p">)))</span>
<span class="w">      </span><span class="p">(</span><span class="nf">car</span><span class="w"> </span><span class="p">(</span><span class="nv">seq-filter</span>
<span class="w">            </span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">(</span><span class="nv">path</span><span class="p">)</span>
<span class="w">              </span><span class="p">(</span><span class="nf">string-match</span><span class="w"> </span><span class="nv">regex</span><span class="w"> </span><span class="p">(</span><span class="nf">file-name-nondirectory</span><span class="w"> </span><span class="nv">path</span><span class="p">)))</span>
<span class="w">            </span><span class="nv">org-agenda-files</span><span class="p">))))</span>

<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-capture-templates</span>
<span class="w">        </span><span class="o">`</span><span class="p">((</span><span class="s">&quot;t&quot;</span><span class="w"> </span><span class="s">&quot;Tasks&quot;</span><span class="p">)</span>

<span class="w">          </span><span class="p">(</span><span class="s">&quot;td&quot;</span><span class="w"> </span><span class="s">&quot;Todo with deadline&quot;</span><span class="w"> </span><span class="nv">entry</span>
<span class="w">           </span><span class="p">(</span><span class="nv">file</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nv">my/get-org-agenda-denote-file</span><span class="w"> </span><span class="s">&quot;agenda&quot;</span><span class="p">))</span>
<span class="w">           </span><span class="s">&quot;* TODO %^{Task}\nDEADLINE: %^{Deadline}t\n%?\n&quot;</span>
<span class="w">           </span><span class="nb">:empty-lines</span><span class="w"> </span><span class="mi">1</span>
<span class="w">           </span><span class="nb">:immediate-finish</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>

<span class="w">          </span><span class="p">(</span><span class="s">&quot;tp&quot;</span><span class="w"> </span><span class="s">&quot;Task&quot;</span><span class="w"> </span><span class="nv">entry</span>
<span class="w">           </span><span class="p">(</span><span class="nv">file</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nv">my/get-org-agenda-denote-file</span><span class="w"> </span><span class="s">&quot;agenda&quot;</span><span class="p">))</span>
<span class="w">           </span><span class="s">&quot;* TODO %?\n  %U\n  %a\n  %i&quot;</span><span class="w"> </span><span class="nb">:empty-lines</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">          </span><span class="p">(</span><span class="s">&quot;n&quot;</span><span class="w"> </span><span class="s">&quot;New note (with Denote)&quot;</span><span class="w"> </span><span class="nv">plain</span>
<span class="w">           </span><span class="p">(</span><span class="nv">file</span><span class="w"> </span><span class="nv">denote-last-path</span><span class="p">)</span>
<span class="w">           </span><span class="nf">#&#39;</span><span class="nv">denote-org-capture</span><span class="w"> </span><span class="nb">:no-save</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="nb">:immediate-finish</span><span class="w"> </span><span class="no">nil</span>
<span class="w">           </span><span class="nb">:kill-buffer</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="nb">:jump-to-captured</span><span class="w"> </span><span class="no">t</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-priority-to-anki</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; check connection with anki</span>
<span class="w">  </span><span class="p">(</span><span class="nb">unless</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="p">(</span><span class="nf">boundp</span><span class="w"> </span><span class="ss">&#39;anki-editor-mode</span><span class="p">)</span><span class="w"> </span><span class="nv">anki-editor-mode</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">anki-editor-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">anki-editor-api-check</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; delete anki_note_type and/or anki_note_id for each w/o a priority</span>
<span class="w">  </span><span class="p">(</span><span class="k">save-excursion</span>
<span class="w">    </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">points-no-priority</span>
<span class="w">           </span><span class="p">(</span><span class="nv">org-ql-query</span>
<span class="w">             </span><span class="nb">:select</span><span class="w"> </span><span class="nf">#&#39;point-marker</span>
<span class="w">             </span><span class="nb">:from</span><span class="w"> </span><span class="p">(</span><span class="nf">current-buffer</span><span class="p">)</span>
<span class="w">             </span><span class="nb">:where</span>
<span class="w">             </span><span class="o">&#39;</span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="nv">not</span><span class="w"> </span><span class="p">(</span><span class="nv">priority</span><span class="p">))</span>
<span class="w">                   </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="p">(</span><span class="nv">property</span><span class="w"> </span><span class="s">&quot;ANKI_NOTE_ID&quot;</span><span class="p">)</span>
<span class="w">                       </span><span class="p">(</span><span class="nv">property</span><span class="w"> </span><span class="s">&quot;ANKI_NOTE_TYPE&quot;</span><span class="p">))))))</span>
<span class="w">      </span><span class="p">(</span><span class="nb">dolist</span><span class="w"> </span><span class="p">(</span><span class="nv">p</span><span class="w"> </span><span class="p">(</span><span class="nf">reverse</span><span class="w"> </span><span class="nv">points-no-priority</span><span class="p">))</span>
<span class="w">        </span><span class="p">(</span><span class="nf">goto-char</span><span class="w"> </span><span class="nv">p</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nv">org-find-property</span><span class="w"> </span><span class="s">&quot;ANKI_NOTE_ID&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="nv">anki-editor-delete-note-at-point</span><span class="p">))</span>
<span class="w">        </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nv">org-find-property</span><span class="w"> </span><span class="s">&quot;ANKI_NOTE_TYPE&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="nv">org-delete-property</span><span class="w"> </span><span class="s">&quot;ANKI_NOTE_TYPE&quot;</span><span class="p">)))))</span>
<span class="w">  </span><span class="c1">;; ensure all priority headings have anki_note_type set</span>
<span class="w">  </span><span class="p">(</span><span class="k">save-excursion</span>
<span class="w">    </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">points-yes-priority</span>
<span class="w">           </span><span class="p">(</span><span class="nv">org-ql-query</span>
<span class="w">             </span><span class="nb">:select</span><span class="w"> </span><span class="nf">#&#39;point-marker</span>
<span class="w">             </span><span class="nb">:from</span><span class="w"> </span><span class="p">(</span><span class="nf">current-buffer</span><span class="p">)</span>
<span class="w">             </span><span class="nb">:where</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">priority</span><span class="p">))))</span>
<span class="w">      </span><span class="p">(</span><span class="nb">dolist</span><span class="w"> </span><span class="p">(</span><span class="nv">p</span><span class="w"> </span><span class="p">(</span><span class="nf">reverse</span><span class="w"> </span><span class="nv">points-yes-priority</span><span class="p">))</span>
<span class="w">        </span><span class="p">(</span><span class="nf">goto-char</span><span class="w"> </span><span class="nv">p</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nb">unless</span><span class="w"> </span><span class="p">(</span><span class="nv">org-entry-get</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="s">&quot;ANKI_NOTE_TYPE&quot;</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="nv">anki-editor-set-note-type</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="s">&quot;Basic&quot;</span><span class="p">))))))</span>

<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-clone-with-fraction</span><span class="w"> </span><span class="p">(</span><span class="nv">days</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">effort</span><span class="p">)</span>
<span class="w">  </span><span class="s">&quot;Clone subtree with time shifts, prefixing each subheading with fraction prefix.&quot;</span>
<span class="w">  </span><span class="p">(</span><span class="k">interactive</span>
<span class="w">   </span><span class="p">(</span><span class="nf">list</span>
<span class="w">    </span><span class="p">(</span><span class="nv">read-number</span><span class="w"> </span><span class="s">&quot;How many days to complete it over?: &quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">read-number</span><span class="w"> </span><span class="s">&quot;How many minutes do you expect this task to take?: &quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">read-number</span><span class="w"> </span><span class="s">&quot;On a scale of 1-10, how much effort will this take?: &quot;</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">days</span><span class="w"> </span><span class="p">(</span><span class="nf">1-</span><span class="w"> </span><span class="nv">days</span><span class="p">))</span>
<span class="w">  </span><span class="c1">;; create clones</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-clone-subtree-with-time-shift</span><span class="w"> </span><span class="nv">days</span><span class="w"> </span><span class="s">&quot;-1d&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-set-property</span><span class="w"> </span><span class="s">&quot;TIME&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="nv">time</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">org-set-property</span><span class="w"> </span><span class="s">&quot;EFFORT&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="nv">effort</span><span class="p">))</span>
<span class="w">  </span><span class="c1">;; adjust appropriately</span>
<span class="w">  </span><span class="p">(</span><span class="k">save-excursion</span>
<span class="w">    </span><span class="p">(</span><span class="nv">org-next-visible-heading</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="c1">;; first, sort</span>
<span class="w">    </span><span class="p">(</span><span class="nb">cl-loop</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">depth</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="p">(</span><span class="nf">1-</span><span class="w"> </span><span class="nv">days</span><span class="p">)</span><span class="w"> </span><span class="nv">downto</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nb">do</span>
<span class="w">             </span><span class="p">(</span><span class="k">save-excursion</span>
<span class="w">               </span><span class="c1">;; shift</span>
<span class="w">               </span><span class="p">(</span><span class="nb">dotimes</span><span class="w"> </span><span class="p">(</span><span class="nv">_</span><span class="w"> </span><span class="nv">depth</span><span class="p">)</span>
<span class="w">                 </span><span class="p">(</span><span class="nv">org-metadown</span><span class="p">))))</span>
<span class="w">    </span><span class="c1">;; add todo and demote</span>
<span class="w">    </span><span class="p">(</span><span class="k">save-excursion</span>
<span class="w">      </span><span class="p">(</span><span class="nb">cl-loop</span><span class="w"> </span><span class="nv">repeat</span><span class="w"> </span><span class="p">(</span><span class="nf">1-</span><span class="w"> </span><span class="nv">days</span><span class="p">)</span><span class="w"> </span><span class="nb">do</span>
<span class="w">               </span><span class="p">(</span><span class="nv">org-next-visible-heading</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nb">cl-loop</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">depth</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="p">(</span><span class="nf">1-</span><span class="w"> </span><span class="nv">days</span><span class="p">)</span><span class="w"> </span><span class="nv">downto</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nb">do</span>
<span class="w">               </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">frac</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%d/%d&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">1+</span><span class="w"> </span><span class="nv">depth</span><span class="p">)</span><span class="w"> </span><span class="nv">days</span><span class="p">))</span>
<span class="w">                     </span><span class="p">(</span><span class="nv">time-daily</span><span class="w"> </span><span class="p">(</span><span class="nf">/</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">days</span><span class="p">)))</span>
<span class="w">                 </span><span class="p">(</span><span class="nv">org-demote</span><span class="p">)</span>
<span class="w">                 </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">org-special-ctrl-a/e</span><span class="w"> </span><span class="no">t</span><span class="p">))</span>
<span class="w">                   </span><span class="p">(</span><span class="nv">org-beginning-of-line</span><span class="p">))</span>
<span class="w">                 </span><span class="p">(</span><span class="nf">insert</span><span class="w"> </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="nv">frac</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">))</span>
<span class="w">                 </span><span class="p">(</span><span class="nv">org-set-property</span><span class="w"> </span><span class="s">&quot;FRACTION&quot;</span><span class="w"> </span><span class="nv">frac</span><span class="p">)</span>
<span class="w">                 </span><span class="p">(</span><span class="nv">org-set-property</span><span class="w"> </span><span class="s">&quot;TIME&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="nv">time-daily</span><span class="p">))</span>
<span class="w">                 </span><span class="p">(</span><span class="nv">org-set-property</span><span class="w"> </span><span class="s">&quot;EFFORT&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="nv">effort</span><span class="p">))</span>
<span class="w">                 </span><span class="p">(</span><span class="nv">org-next-visible-heading</span><span class="w"> </span><span class="mi">-1</span><span class="p">))))))</span>

<span class="p">(</span><span class="nv">leaf</span><span class="w"> </span><span class="nv">visual-fill-column</span>
<span class="w">  </span><span class="nb">:require</span><span class="w"> </span><span class="no">t</span>
<span class="w">  </span><span class="nb">:hook</span><span class="w"> </span><span class="p">((</span><span class="nv">org-mode-hook</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">my/org-visual-fill</span><span class="p">))</span>
<span class="w">  </span><span class="nb">:init</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">my/org-visual-fill</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">visual-fill-column-width</span><span class="w"> </span><span class="mi">100</span>
<span class="w">          </span><span class="nv">visual-fill-column-center-text</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">visual-fill-column-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">provide</span><span class="w"> </span><span class="ss">&#39;my-org</span><span class="p">)</span>
</code></pre></div>

<hr />
<p><em>Last updated: { git_revision_date_localized }</em></p>
</section>

<section id="mkdocs-terminal-after-content">
    
</section>

            </main>
        </div>
        <hr><footer>
    <div class="terminal-mkdocs-footer-grid">
        <div id="terminal-mkdocs-footer-copyright-info">
             Site built with <a href="http://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.
        </div>
    </div>
</footer>
    </div>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="alertdialog" aria-modal="true" aria-labelledby="searchModalLabel">
    <div class="modal-dialog modal-lg" role="search">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close btn btn-default btn-ghost" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p id="searchInputLabel">Type to start searching</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" aria-labelledby="searchInputLabel" placeholder="" id="mkdocs-search-query" title="Please enter search terms here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No document matches found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
    
</body>

</html>